{"remainingRequest":"/Users/drob/Desktop/2006/suibian/drobob/node_modules/babel-loader/lib/index.js!/Users/drob/Desktop/2006/suibian/drobob/node_modules/cache-loader/dist/cjs.js??ref--0-0!/Users/drob/Desktop/2006/suibian/drobob/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/drob/Desktop/2006/suibian/drobob/src/views/main/category/categoryEdit.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/drob/Desktop/2006/suibian/drobob/src/views/main/category/categoryEdit.vue","mtime":1601205088429},{"path":"/Users/drob/Desktop/2006/suibian/drobob/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/drob/Desktop/2006/suibian/drobob/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/drob/Desktop/2006/suibian/drobob/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/drob/Desktop/2006/suibian/drobob/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KaW1wb3J0IGF4aW9zIGZyb20gJ2F4aW9zJzsKaW1wb3J0IHsgVVJMLCBTVUNDRVNTIH0gZnJvbSAiLi4vLi4vLi4vbGliL2Jhc2UiOwpleHBvcnQgZGVmYXVsdCB7CiAgbmFtZTogImNhdGVnb3J5RWRpdCIsCiAgZGF0YTogZnVuY3Rpb24gZGF0YSgpIHsKICAgIHZhciB2YWxpZGF0ZUNuYW1lID0gZnVuY3Rpb24gdmFsaWRhdGVDbmFtZShydWxlLCB2YWx1ZSwgY2FsbGJhY2spIHsKICAgICAgaWYgKHZhbHVlID09PSAnJykgewogICAgICAgIGNhbGxiYWNrKG5ldyBFcnJvcign5YiG57G75ZCN56ew5LiN6IO95Li656m6JykpOwogICAgICB9IGVsc2UgaWYgKCEvW1x1NGUwMC1cdTlmYTVdezIsNn0vLnRlc3QodmFsdWUpKSB7CiAgICAgICAgY2FsbGJhY2sobmV3IEVycm9yKCfliIbnsbvnmoTlkI3np7Dlj6rog73ljIXlkKsyLTbkvY3msYnlrZcnKSk7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgY2FsbGJhY2soKTsKICAgICAgfQogICAgfTsKCiAgICByZXR1cm4gewogICAgICBjYXRlZ29yeTogbnVsbCwKICAgICAgY2F0ZWdvcnlSdWxlczogewogICAgICAgIGNuYW1lOiBbLy8ge3JlcXVpcmVkOnRydWUsbWFzc2FnZTon5YiG57G75ZCN5b+F5aGrJyx0cmlnZ2VyOidibHVyJ30sCiAgICAgICAgewogICAgICAgICAgdmFsaWRhdG9yOiB2YWxpZGF0ZUNuYW1lLAogICAgICAgICAgdHJpZ2dlcjogImJsdXIiCiAgICAgICAgfV0sCiAgICAgICAgY2Rlc2M6IFt7CiAgICAgICAgICByZXF1aXJlZDogdHJ1ZSwKICAgICAgICAgIG1hc3NhZ2U6ICfor7fovpPlhaXliIbnsbvmj4/ov7AnLAogICAgICAgICAgdHJpZ2dlcjogJ2JsdXInCiAgICAgICAgfSwgewogICAgICAgICAgbWluOiAzLAogICAgICAgICAgbWF4OiAyMCwKICAgICAgICAgIG1hc3NhZ2U6ICfplb/luqbkuLozLTIw5L2N5a2X56ymJywKICAgICAgICAgIHRyaWdnZXI6ICdibHVyJwogICAgICAgIH1dCiAgICAgIH0KICAgIH07CiAgfSwKICBtZXRob2RzOiB7CiAgICBoYW5kbGVyU3VibWl0OiBmdW5jdGlvbiBoYW5kbGVyU3VibWl0KCkgewogICAgICB2YXIgX3RoaXMgPSB0aGlzOwoKICAgICAgdGhpcy4kcmVmcy5jYXRlZ29yeWZvcm0udmFsaWRhdGUoZnVuY3Rpb24gKHZhbGlkKSB7CiAgICAgICAgLy8gY29uc29sZS5sb2codmFsaWQpOwogICAgICAgIGlmICh2YWxpZCkgewogICAgICAgICAgdmFyIHVybCA9IFVSTCArICcvYWRtaW4vY2F0ZWdvcnkvYWRkJzsKICAgICAgICAgIHZhciB0b2tlbiA9IHNlc3Npb25TdG9yYWdlLmdldEl0ZW0oJ3Rva2VuJyk7IC8vIGF4aW9zLnBvc3QodXJsLHRoaXMuY2F0ZWdvcnkpLnRoZW4ocmVzPT57CiAgICAgICAgICAvLyAgICAgU1VDQ0VTUyxGQUlMCiAgICAgICAgICAvLyAgICAgY29uc29sZS5sb2cocmVzKTsKICAgICAgICAgIC8vIH0pLmNhdGNoKGVycm9yPT57CiAgICAgICAgICAvLyAgICAgdGhpcy4kbWVzc2FnZS5lcnJvcign5YiG57G75re75Yqg5aSx6LSlJyk7CiAgICAgICAgICAvLyB9KQoKICAgICAgICAgIGF4aW9zKHsKICAgICAgICAgICAgdXJsOiB1cmwsCiAgICAgICAgICAgIG1ldGhvZDogJ1BPU1QnLAogICAgICAgICAgICBkYXRhOiBfdGhpcy5jYXRlZ29yeSwKICAgICAgICAgICAgaGVhZGVyczogewogICAgICAgICAgICAgIHRva2VuOiB0b2tlbgogICAgICAgICAgICB9CiAgICAgICAgICB9KS50aGVuKGZ1bmN0aW9uIChyZXMpIHsKICAgICAgICAgICAgLy8gY29uc29sZS5sb2cocmVzLmRhdGEuY29kZSk7CiAgICAgICAgICAgIGlmIChyZXMuc3RhdHVzID09PSAyMDAgJiYgcmVzLmRhdGEuY29kZSA9PT0gU1VDQ0VTUykgewogICAgICAgICAgICAgIF90aGlzLiRtZXNzYWdlLnN1Y2Nlc3MocmVzLmRhdGEubXNnKTsKICAgICAgICAgICAgfQogICAgICAgICAgfSkuY2F0Y2goZnVuY3Rpb24gKCkgewogICAgICAgICAgICBfdGhpcy5tZXNzYWdlLmVycm9yKCfliIbnsbvmt7vliqDlpLHotKUnKTsKICAgICAgICAgIH0pOwogICAgICAgIH0KICAgICAgfSk7CiAgICB9LAogICAgaW5pdENhdGVnb3J5OiBmdW5jdGlvbiBpbml0Q2F0ZWdvcnkoY2lkKSB7CiAgICAgIHZhciBfdGhpczIgPSB0aGlzOwoKICAgICAgdmFyIHVybCA9IFVSTCArICcvYWRtaW4vY2F0ZWdvcnkvcmVhZCc7CiAgICAgIHZhciB0b2tlbiA9IHNlc3Npb25TdG9yYWdlLmdldEl0ZW0oJ3Rva2VuJyk7CiAgICAgIGF4aW9zKHsKICAgICAgICBtZXRob2Q6ICdHRVQnLAogICAgICAgIHVybDogdXJsLAogICAgICAgIHBhcmFtczogewogICAgICAgICAgY2lkOiBjaWQKICAgICAgICB9LAogICAgICAgIGhlYWRlcnM6IHsKICAgICAgICAgIHRva2VuOiB0b2tlbgogICAgICAgIH0KICAgICAgfSkudGhlbihmdW5jdGlvbiAocmVzKSB7CiAgICAgICAgaWYgKHJlcy5zdGF0dXMgPT09IDIwMCAmJiByZXMuZGF0YS5jb2RlID09PSBTVUNDRVNTKSB7CiAgICAgICAgICBpZiAocmVzLmRhdGEuZGF0YSkgewogICAgICAgICAgICBfdGhpczIuY2F0ZWdvcnkgPSByZXMuZGF0YS5kYXRhOwogICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgX3RoaXMyLiRtZXNzYWdlLmVycm9yKHJlcy5kYXRhLm1zZyk7CiAgICAgICAgICB9CiAgICAgICAgfQoKICAgICAgICBjb25zb2xlLmxvZyhyZXMpOwogICAgICB9KS5jYXRjaChmdW5jdGlvbiAoKSB7fSk7CiAgICB9CiAgfSwKICBtb3VudGVkOiBmdW5jdGlvbiBtb3VudGVkKCkgewogICAgdmFyIGNpZCA9IHRoaXMuJHJvdXRlLnF1ZXJ5LmNpZDsKICAgIHRoaXMuaW5pdENhdGVnb3J5KGNpZCk7CiAgfQp9Ow=="},{"version":3,"sources":["categoryEdit.vue"],"names":[],"mappings":"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","sourcesContent":["<template>\n\n    <div>\n        <div v-if=\"category\">\n        <el-form :model=\"category\" :rules=\"categoryRules\" ref=\"categoryform\">\n            <el-form-item label=\"分类名称\" prop=\"cname\">\n                <el-input v-model=\"category.cname\" placeholder=\"请输入分类名称(2-6汉字)\"></el-input>\n            </el-form-item>\n            <el-form-item label=\"分类描述\" prop=\"cdesc\">\n                <el-input v-model=\"category.cdesc\" placeholder=\"请输入分类描述\"></el-input>\n\n            </el-form-item>\n            <el-form-item>\n                <el-button type=\"primary\" @click=\"handlerSubmit\">提交</el-button>\n            </el-form-item>\n        </el-form>\n        </div>\n    </div>\n    \n</template>\n\n<script>\n\n    import axios from 'axios';\n\n    import {URL,SUCCESS} from \"../../../lib/base\";\n\n    export default {\n        name: \"categoryEdit\",\n        data(){\n            let validateCname = (rule,value,callback)=>{\n                if (value===''){\n                    callback(new Error('分类名称不能为空'));\n                }else if (!(/[\\u4e00-\\u9fa5]{2,6}/.test(value))){\n                    callback(new Error('分类的名称只能包含2-6位汉字'))\n\n                }else{\n                    callback();\n                }\n\n            }\n\n            return{\n                category:null,\n                categoryRules:{\n                    cname:[\n                        // {required:true,massage:'分类名必填',trigger:'blur'},\n                        {validator:validateCname,trigger: \"blur\"}\n                    ],\n                    cdesc:[\n                        {required:true,massage:'请输入分类描述',trigger:'blur'},\n                        {min:3,max:20,massage: '长度为3-20位字符',trigger: 'blur'}\n\n\n                    ]\n\n                }\n            }\n        },\n        methods:{\n            handlerSubmit(){\n                this.$refs.categoryform.validate(valid=>{\n                    // console.log(valid);\n\n                    if (valid){\n                        let url=URL+'/admin/category/add';\n                        let token=sessionStorage.getItem('token');\n                        // axios.post(url,this.category).then(res=>{\n                        //     SUCCESS,FAIL\n                        //     console.log(res);\n                        // }).catch(error=>{\n                        //     this.$message.error('分类添加失败');\n                        // })\n                        axios({\n                            url,\n                            method:'POST',\n                            data:this.category,\n                            headers:{\n                                token\n                            }\n                        }).then(res=>{\n                            // console.log(res.data.code);\n                            if (res.status===200 && res.data.code===SUCCESS){\n                                this.$message.success(res.data.msg)\n                            }\n                        }).catch(()=>{\n                            this.message.error('分类添加失败')\n                        })\n                    }\n                })\n            },\n            initCategory(cid){\n                let url=URL+'/admin/category/read';\n                let token=sessionStorage.getItem('token');\n                axios({\n                    method:'GET',\n                    url,\n                    params:{cid},\n                    headers: {\n                        token\n                    }\n                }).then(res=>{\n                    if (res.status===200&&res.data.code===SUCCESS){\n                        if (res.data.data){\n                            this.category=res.data.data\n                        }else{\n                            this.$message.error(res.data.msg);\n                        }\n                    }\n                    console.log(res);\n                }).catch(()=>{\n\n                })\n\n            }\n\n        },\n        mounted() {\n            let {cid}=this.$route.query;\n            this.initCategory(cid);\n        }\n    }\n</script>\n\n<style scoped>\n\n</style>"],"sourceRoot":"src/views/main/category"}]}