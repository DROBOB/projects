{"remainingRequest":"/Users/drob/Desktop/2006/suibian/drobob/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/drob/Desktop/2006/suibian/drobob/src/views/main/stayhome/stayhomeadd.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/drob/Desktop/2006/suibian/drobob/src/views/main/stayhome/stayhomeadd.vue","mtime":1601019028593},{"path":"/Users/drob/Desktop/2006/suibian/drobob/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/drob/Desktop/2006/suibian/drobob/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/drob/Desktop/2006/suibian/drobob/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/drob/Desktop/2006/suibian/drobob/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCBFIGZyb20gJ3dhbmdlZGl0b3InOwppbXBvcnQge1VSTH0gZnJvbSAiLi4vLi4vLi4vbGliL2Jhc2UiOwppbXBvcnQgY2l0eSBmcm9tICIuLi8uLi8uLi9saWIvY2l0eS5qc29uIgovLyBpbXBvcnQgUmljaFRleHQgZnJvbSAiLi4vLi4vLi4vY29tcG9uZW50cy9yaWNodGV4dC9SaWNoVGV4dCI7Ci8vIGltcG9ydCBsb2FkaW5nIGZyb20gIi4uLy4uLy4uL2NvbXBvbmVudHMvbG9hZGluZyI7CmltcG9ydCBpbnN0YW5jZSBmcm9tICIuLi8uLi8uLi9odHRwL2h0dHAiOwpjb25zb2xlLmxvZyhjaXR5KQoKZXhwb3J0IGRlZmF1bHQgewogICAgbmFtZTogInN0YXlob21lYWRkIiwKICAgIGRhdGEoKXsKICAgICAgICByZXR1cm4gewogICAgICAgICAgICBjYXRlZ29yaWVzOltdLAogICAgICAgICAgICB1cGxvYWR1cmw6VVJMICsgJy9hZG1pbi91cGxvYWQvaW5kZXgnLAogICAgICAgICAgICBzaG93TG9hZGluZzpmYWxzZSwKICAgICAgICAgICAgc3RheWhvbWVmb3JtOnsKICAgICAgICAgICAgICAgIHNuYW1lOicnLAogICAgICAgICAgICAgICAgc2Rlc2M6JycsCiAgICAgICAgICAgICAgICBzdGh1bWI6JycsCiAgICAgICAgICAgICAgICBzcHJpY2U6JycsCiAgICAgICAgICAgICAgICBzY2l0eTonJywKICAgICAgICAgICAgICAgIHNhcmVhOicnLAogICAgICAgICAgICAgICAgc2FkZHJlc3M6JycsCiAgICAgICAgICAgICAgICBzdGFnOicnLAogICAgICAgICAgICAgICAgc2Jhbm5lcjonJywKICAgICAgICAgICAgICAgIHNjb3JlOicnLAogICAgICAgICAgICAgICAgc2RldGFpbDonJywKICAgICAgICAgICAgICAgIHNub3RpY2U6JycsCiAgICAgICAgICAgICAgICBjdGltZTonJywKICAgICAgICAgICAgICAgIHN0YXR1czonJywKICAgICAgICAgICAgICAgIHNwcm92aW5jZTonJywKICAgICAgICAgICAgICAgIGNpZDonJywKCiAgICAgICAgICAgIH0sCiAgICAgICAgICAgIGJhbm5lckFycjpbXSwKICAgICAgICAgICAgZGlhbG9nVmlzaWJsZTpmYWxzZSwKICAgICAgICAgICAgZGlhbG9nUHJldmlld0ltZzonJywKICAgICAgICAgICAgY2l0eSwKICAgICAgICAgICAgcHJvdmluY2U6W10sCiAgICAgICAgICAgIGNpdHlsaXN0OltdLAoKCiAgICAgICAgfQogICAgfSwKICAgIGNvbXB1dGVkOnsKICAgICAgICAvLyBjaXR5TGlzdCgpewogICAgICAgIC8vICAgIGxldCBjdXJyZW50PXRoaXMuY2l0eS5maW5kKGVsZT0+ZWxlLm5hbWUgPT09IHRoaXMuc3RheWhvbWVmb3JtLnNwcm92aW5jZSk7CiAgICAgICAgLy8gICAgbGV0IGNpdHlMaXN0PWN1cnJlbnQuY2l0eS5tYXAoZWxlPT5lbGUubmFtZSk7CiAgICAgICAgLy8gICAgIGNvbnNvbGUubG9nKGNpdHlMaXN0KQogICAgICAgIC8vIH0sCiAgICAgICAgLy8gYXJlYUxpc3QoKXsKICAgICAgICAvLwogICAgICAgIC8vIH0KCiAgICB9LAoKICAgIG1ldGhvZHM6ewogICAgICAgIGluaXRDYXRlZ29yeSgpewogICAgICAgICAgICBpbnN0YW5jZSgnL2FkbWluL2NhdGVnb3J5L2luZGV4YWxsJykudGhlbihyZXM9PnsKICAgICAgICAgICAgICAgIC8vIHRoaXMuc2hvdwogICAgICAgICAgICAgICAgaWYocmVzLmNvZGU9PT0yMDApewogICAgICAgICAgICAgICAgICAgIHRoaXMuY2F0ZWdvcmllcz1yZXMuZGF0YTsKCiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0pLmNhdGNoKCgpPT57CgogICAgICAgICAgICB9KQoKICAgICAgICB9LAoKICAgICAgICAvL+e8qeeVpeWbvuS4iuS8oOaIkOWKnwogICAgICAgIGhhbmRsZVRodW1iU3VjY2VzcygpewoKCiAgICAgICAgfSwKICAgICAgICBoYW5kbGVUaHVtYkJlZm9ydXBsb2FkKGZpbGUpewogICAgICAgICAgICBsZXQge3NpemUsdHlwZX09ZmlsZTsKICAgICAgICAgICAgbGV0IHVwbG9hZE1heHNpemU9MjAwKjEwMjQ7CiAgICAgICAgICAgIGxldCB1cGxvYWRUeXBlPVsnaW1hZ2UvanBnJywnaW1hZ2UvanBlZycsJ2ltYWdlL3BuZycsJ2ltYWdlL3dlYnAnXTsKICAgICAgICAgICAgbGV0IHNpemVGbGFnPXRydWUsdHlwZUZsYWc9dHJ1ZTsKICAgICAgICAgICAgc2l6ZUZsYWcgPSBzaXplIDwgdXBsb2FkTWF4c2l6ZTsKICAgICAgICAgICAgdHlwZUZsYWcgPSB1cGxvYWRUeXBlLnNvbWUoZWxlPT5lbGU9PXR5cGUpOwogICAgICAgICAgICBpZiAoIXR5cGVGbGFnKXsKICAgICAgICAgICAgICAgIHRoaXMuJG1lc3NhZ2UuZXJyb3IoJ+S4iuS8oOWbvueJh+WPquiDveS4umpwZ++8jGpwZWfvvIxwbmfvvIx3ZWJw5qC85byPJykKICAgICAgICAgICAgfQogICAgICAgICAgICBpZiAoIXNpemVGbGFnKXsKICAgICAgICAgICAgICAgIHRoaXMuJG1lc3NhZ2UuZXJyb3IoJ+S4iuS8oOWbvueJh+Wkp+Wwj+S4jeiDvei2hei/hzIwMGtiJykKICAgICAgICAgICAgfQoKCiAgICAgICAgICAgIHJldHVybiBzaXplRmxhZyAmJiB0eXBlRmxhZwoKCgogICAgICAgIH0sCiAgICAgICAgLy/ova7mkq3kuIrkvKAKICAgICAgICBoYW5kbGVCYW5uZXJTdWNjZXNzKCl7CiAgICAgICAgICAvLyB0aGlzLnN0YXlob21lZm9ybS5zYmFubmVyICs9IHJlcy5pbWdwYXRoICsgJywnOwogICAgICAgICAgICB0aGlzLmJhbm5lckFyci5zYmFubmVyPXRoaXMuYmFubmVyQXJyLmpvaW4oJywnKTsKCiAgICAgICAgfSwKICAgICAgICBoYW5kbGVCYW5uZXJQcmV2aWV3KGZpbGUpewogICAgICAgICAgICBsZXQgdXJsPXRoaXMuSU1HVVJMK2ZpbGUucmVzcG9uc2UuaW1ncGF0aDsKICAgICAgICAgICAgdXJsOwogICAgICAgICAgICB0aGlzLmRpYWxvZ1Zpc2libGU9dHJ1ZTsKICAgICAgICB9LAogICAgICAgIGluaXRSaWNoVGV4dCgpewogICAgICAgICAgICAvLyBsZXQgdGhhdD10aGlzOwoKCiAgICAgICAgICAgIGxldCBlZGl0PW5ldyBFKHRoaXMuJHJlZnMuc2RldGFpbCk7CiAgICAgICAgICAgIGVkaXQuY3JlYXRlKCk7CgogICAgICAgIH0sCiAgICAgICAgc2V0UHJvdmluY2UoKXsKICAgICAgICAgICAgdGhpcy5wcm92aW5jZT10aGlzLmNpdHkubWFwKGVsZT0+ZWxlLm5hbWUpOwogICAgICAgIH0sCiAgICAgICAgc2V0Q2l0eUxpc3QoKXsKCiAgICAgICAgfQoKCiAgICB9LAogICAgbW91bnRlZCgpIHsKICAgICAgICB0aGlzLnNldFByb3ZpbmNlKCk7CiAgICAgICAgdGhpcy5pbml0Q2F0ZWdvcnkoKTsKICAgICAgICB0aGlzLmluaXRSaWNoVGV4dCgpOwogICAgfQp9Cg=="},{"version":3,"sources":["stayhomeadd.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAoFA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;;AAEA;;AAEA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA;;;;AAIA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA","file":"stayhomeadd.vue","sourceRoot":"src/views/main/stayhome","sourcesContent":["<template>\n    <div>\n        <el-form :model=\"stayhomeform\" ref=\"stayhomeform\">\n            <el-form-item label=\"所属分类\">\n                <el-input v-model=\"stayhomeform.cid\"></el-input>\n            </el-form-item>\n            <el-form-item label=\"名称\">\n                <el-input v-model=\"stayhomeform.sname\"></el-input>\n            </el-form-item>\n            <el-form-item label=\"详情\">\n                <el-input v-model=\"stayhomeform.sdesc\"></el-input>\n            </el-form-item>\n            <el-form-item label=\"缩略图\">\n            <el-form-item>\n                    <el-upload\n                            class=\"avatar-uploader\"\n                            :action=\"uploadurl\"\n                            list-type=\"picture-card\"\n                            multiple\n                            limit=\"5\"\n                            :on-success=\"handleThumbSuccess\"\n                            :before-upload=\"handleThumbBeforupload\">\n                        <img v-if=\"stayhomeform.sthumb\" :src=\"URL+stayhomeform.sthumb\" class=\"avatar\">\n                        <i v-else class=\"el-icon-plus avatar-uploader-icon\"></i>\n                        <div slot=\"tip\" class=\"el-upload__tip\">只能上传jpg/png/jpeg/webp文件，且不超过200kb</div>\n                    </el-upload>\n            </el-form-item>\n            </el-form-item>\n            <el-form-item label=\"价格\">\n                <el-input v-model=\"stayhomeform.sprice\"></el-input>\n            </el-form-item>\n            <el-form-item label=\"城市\">\n                <el-input v-model=\"stayhomeform.scity\"></el-input>\n            </el-form-item>\n            <el-form-item label=\"标签\">\n                <el-input v-model=\"stayhomeform.stag\"></el-input>\n            </el-form-item>\n            <el-form-item label=\"民宿省份\">\n                <el-select v-model=\"stayhomeform.sprovince\">\n                    <el-option v-for=\"(item,index) in province\" :key=\"index\" :value=\"item\" :label=\"item\">\n                    </el-option>\n                </el-select>\n            </el-form-item>\n            <el-form-item label=\"民宿城市\">\n                <el-select v-model=\"stayhomeform.scity\">\n                    <el-option v-for=\"(item,index) in cityList\" :key=\"index\" :value=\"item\" :label=\"item\">\n                    </el-option>\n                </el-select>\n            </el-form-item>\n            <el-form-item label=\"banner\">\n                <el-form-item>\n                    <el-upload\n                            class=\"avatar-uploader\"\n                            :action=\"uploadurl\"\n                            :show-file-list=\"false\"\n                            :on-success=\"handleBannerSuccess\"\n                            :before-upload=\"handleThumbBeforupload\">\n<!--                        <i class=\"el-icon-plus\"></i>-->\n                        <img v-if=\"stayhomeform.sthumb\" :src=\"URL+stayhomeform.sthumb\" class=\"avatar\">\n                        <i v-else class=\"el-icon-plus avatar-uploader-icon\"></i>\n                        <div slot=\"tip\" class=\"el-upload__tip\">只能上传jpg/png/jpeg/webp文件，且不超过200kb,最佳比例1：1，最多五张</div>\n                    </el-upload>\n\n                </el-form-item>\n            </el-form-item>\n            <el-form-item label=\"评分\">\n                <el-input v-model=\"stayhomeform.score\"></el-input>\n            </el-form-item>\n            <el-form-item label=\"详情\">\n\n            </el-form-item>\n            <div id=\"sdetail\" ref=\"sdetail\"></div>\n\n\n        </el-form>\n\n        <el-dialog>\n\n        </el-dialog>\n    </div>\n</template>\n\n\n<script>\n    import E from 'wangeditor';\n    import {URL} from \"../../../lib/base\";\n    import city from \"../../../lib/city.json\"\n    // import RichText from \"../../../components/richtext/RichText\";\n    // import loading from \"../../../components/loading\";\n    import instance from \"../../../http/http\";\n    console.log(city)\n\n    export default {\n        name: \"stayhomeadd\",\n        data(){\n            return {\n                categories:[],\n                uploadurl:URL + '/admin/upload/index',\n                showLoading:false,\n                stayhomeform:{\n                    sname:'',\n                    sdesc:'',\n                    sthumb:'',\n                    sprice:'',\n                    scity:'',\n                    sarea:'',\n                    saddress:'',\n                    stag:'',\n                    sbanner:'',\n                    score:'',\n                    sdetail:'',\n                    snotice:'',\n                    ctime:'',\n                    status:'',\n                    sprovince:'',\n                    cid:'',\n\n                },\n                bannerArr:[],\n                dialogVisible:false,\n                dialogPreviewImg:'',\n                city,\n                province:[],\n                citylist:[],\n\n\n            }\n        },\n        computed:{\n            // cityList(){\n            //    let current=this.city.find(ele=>ele.name === this.stayhomeform.sprovince);\n            //    let cityList=current.city.map(ele=>ele.name);\n            //     console.log(cityList)\n            // },\n            // areaList(){\n            //\n            // }\n\n        },\n\n        methods:{\n            initCategory(){\n                instance('/admin/category/indexall').then(res=>{\n                    // this.show\n                    if(res.code===200){\n                        this.categories=res.data;\n\n                    }\n                }).catch(()=>{\n\n                })\n\n            },\n\n            //缩略图上传成功\n            handleThumbSuccess(){\n\n\n            },\n            handleThumbBeforupload(file){\n                let {size,type}=file;\n                let uploadMaxsize=200*1024;\n                let uploadType=['image/jpg','image/jpeg','image/png','image/webp'];\n                let sizeFlag=true,typeFlag=true;\n                sizeFlag = size < uploadMaxsize;\n                typeFlag = uploadType.some(ele=>ele==type);\n                if (!typeFlag){\n                    this.$message.error('上传图片只能为jpg，jpeg，png，webp格式')\n                }\n                if (!sizeFlag){\n                    this.$message.error('上传图片大小不能超过200kb')\n                }\n\n\n                return sizeFlag && typeFlag\n\n\n\n            },\n            //轮播上传\n            handleBannerSuccess(){\n              // this.stayhomeform.sbanner += res.imgpath + ',';\n                this.bannerArr.sbanner=this.bannerArr.join(',');\n\n            },\n            handleBannerPreview(file){\n                let url=this.IMGURL+file.response.imgpath;\n                url;\n                this.dialogVisible=true;\n            },\n            initRichText(){\n                // let that=this;\n\n\n                let edit=new E(this.$refs.sdetail);\n                edit.create();\n\n            },\n            setProvince(){\n                this.province=this.city.map(ele=>ele.name);\n            },\n            setCityList(){\n\n            }\n\n\n        },\n        mounted() {\n            this.setProvince();\n            this.initCategory();\n            this.initRichText();\n        }\n    }\n</script>\n\n<style>\n    .el-icon-plus.avatar-uploader-icon{\n        display: flex;\n        justify-content: center;\n        align-items: center;\n    }\n    .avatar-uploader .el-upload {\n        border: 1px dashed #d9d9d9;\n        border-radius: 6px;\n        cursor: pointer;\n        position: relative;\n        overflow: hidden;\n    }\n    .avatar-uploader .el-upload:hover {\n        border-color: #409EFF;\n    }\n    .avatar-uploader-icon {\n        font-size: 28px;\n        color: #8c939d;\n        width: 178px;\n        height: 178px;\n        line-height: 178px;\n        text-align: center;\n    }\n    .avatar {\n        width: 178px;\n        height: 178px;\n        display: block;\n    }\n\n</style>"]}]}