{"remainingRequest":"/Users/drob/Desktop/2006/suibian/drobob/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/drob/Desktop/2006/suibian/drobob/src/views/main/category/categoryEdit.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/drob/Desktop/2006/suibian/drobob/src/views/main/category/categoryEdit.vue","mtime":1601205088429},{"path":"/Users/drob/Desktop/2006/suibian/drobob/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/drob/Desktop/2006/suibian/drobob/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/drob/Desktop/2006/suibian/drobob/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/drob/Desktop/2006/suibian/drobob/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCgppbXBvcnQgYXhpb3MgZnJvbSAnYXhpb3MnOwoKaW1wb3J0IHtVUkwsU1VDQ0VTU30gZnJvbSAiLi4vLi4vLi4vbGliL2Jhc2UiOwoKZXhwb3J0IGRlZmF1bHQgewogICAgbmFtZTogImNhdGVnb3J5RWRpdCIsCiAgICBkYXRhKCl7CiAgICAgICAgbGV0IHZhbGlkYXRlQ25hbWUgPSAocnVsZSx2YWx1ZSxjYWxsYmFjayk9PnsKICAgICAgICAgICAgaWYgKHZhbHVlPT09JycpewogICAgICAgICAgICAgICAgY2FsbGJhY2sobmV3IEVycm9yKCfliIbnsbvlkI3np7DkuI3og73kuLrnqbonKSk7CiAgICAgICAgICAgIH1lbHNlIGlmICghKC9bXHU0ZTAwLVx1OWZhNV17Miw2fS8udGVzdCh2YWx1ZSkpKXsKICAgICAgICAgICAgICAgIGNhbGxiYWNrKG5ldyBFcnJvcign5YiG57G755qE5ZCN56ew5Y+q6IO95YyF5ZCrMi025L2N5rGJ5a2XJykpCgogICAgICAgICAgICB9ZWxzZXsKICAgICAgICAgICAgICAgIGNhbGxiYWNrKCk7CiAgICAgICAgICAgIH0KCiAgICAgICAgfQoKICAgICAgICByZXR1cm57CiAgICAgICAgICAgIGNhdGVnb3J5Om51bGwsCiAgICAgICAgICAgIGNhdGVnb3J5UnVsZXM6ewogICAgICAgICAgICAgICAgY25hbWU6WwogICAgICAgICAgICAgICAgICAgIC8vIHtyZXF1aXJlZDp0cnVlLG1hc3NhZ2U6J+WIhuexu+WQjeW/heWhqycsdHJpZ2dlcjonYmx1cid9LAogICAgICAgICAgICAgICAgICAgIHt2YWxpZGF0b3I6dmFsaWRhdGVDbmFtZSx0cmlnZ2VyOiAiYmx1ciJ9CiAgICAgICAgICAgICAgICBdLAogICAgICAgICAgICAgICAgY2Rlc2M6WwogICAgICAgICAgICAgICAgICAgIHtyZXF1aXJlZDp0cnVlLG1hc3NhZ2U6J+ivt+i+k+WFpeWIhuexu+aPj+i/sCcsdHJpZ2dlcjonYmx1cid9LAogICAgICAgICAgICAgICAgICAgIHttaW46MyxtYXg6MjAsbWFzc2FnZTogJ+mVv+W6puS4ujMtMjDkvY3lrZfnrKYnLHRyaWdnZXI6ICdibHVyJ30KCgogICAgICAgICAgICAgICAgXQoKICAgICAgICAgICAgfQogICAgICAgIH0KICAgIH0sCiAgICBtZXRob2RzOnsKICAgICAgICBoYW5kbGVyU3VibWl0KCl7CiAgICAgICAgICAgIHRoaXMuJHJlZnMuY2F0ZWdvcnlmb3JtLnZhbGlkYXRlKHZhbGlkPT57CiAgICAgICAgICAgICAgICAvLyBjb25zb2xlLmxvZyh2YWxpZCk7CgogICAgICAgICAgICAgICAgaWYgKHZhbGlkKXsKICAgICAgICAgICAgICAgICAgICBsZXQgdXJsPVVSTCsnL2FkbWluL2NhdGVnb3J5L2FkZCc7CiAgICAgICAgICAgICAgICAgICAgbGV0IHRva2VuPXNlc3Npb25TdG9yYWdlLmdldEl0ZW0oJ3Rva2VuJyk7CiAgICAgICAgICAgICAgICAgICAgLy8gYXhpb3MucG9zdCh1cmwsdGhpcy5jYXRlZ29yeSkudGhlbihyZXM9PnsKICAgICAgICAgICAgICAgICAgICAvLyAgICAgU1VDQ0VTUyxGQUlMCiAgICAgICAgICAgICAgICAgICAgLy8gICAgIGNvbnNvbGUubG9nKHJlcyk7CiAgICAgICAgICAgICAgICAgICAgLy8gfSkuY2F0Y2goZXJyb3I9PnsKICAgICAgICAgICAgICAgICAgICAvLyAgICAgdGhpcy4kbWVzc2FnZS5lcnJvcign5YiG57G75re75Yqg5aSx6LSlJyk7CiAgICAgICAgICAgICAgICAgICAgLy8gfSkKICAgICAgICAgICAgICAgICAgICBheGlvcyh7CiAgICAgICAgICAgICAgICAgICAgICAgIHVybCwKICAgICAgICAgICAgICAgICAgICAgICAgbWV0aG9kOidQT1NUJywKICAgICAgICAgICAgICAgICAgICAgICAgZGF0YTp0aGlzLmNhdGVnb3J5LAogICAgICAgICAgICAgICAgICAgICAgICBoZWFkZXJzOnsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRva2VuCiAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICB9KS50aGVuKHJlcz0+ewogICAgICAgICAgICAgICAgICAgICAgICAvLyBjb25zb2xlLmxvZyhyZXMuZGF0YS5jb2RlKTsKICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHJlcy5zdGF0dXM9PT0yMDAgJiYgcmVzLmRhdGEuY29kZT09PVNVQ0NFU1MpewogICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy4kbWVzc2FnZS5zdWNjZXNzKHJlcy5kYXRhLm1zZykKICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIH0pLmNhdGNoKCgpPT57CiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMubWVzc2FnZS5lcnJvcign5YiG57G75re75Yqg5aSx6LSlJykKICAgICAgICAgICAgICAgICAgICB9KQogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9KQogICAgICAgIH0sCiAgICAgICAgaW5pdENhdGVnb3J5KGNpZCl7CiAgICAgICAgICAgIGxldCB1cmw9VVJMKycvYWRtaW4vY2F0ZWdvcnkvcmVhZCc7CiAgICAgICAgICAgIGxldCB0b2tlbj1zZXNzaW9uU3RvcmFnZS5nZXRJdGVtKCd0b2tlbicpOwogICAgICAgICAgICBheGlvcyh7CiAgICAgICAgICAgICAgICBtZXRob2Q6J0dFVCcsCiAgICAgICAgICAgICAgICB1cmwsCiAgICAgICAgICAgICAgICBwYXJhbXM6e2NpZH0sCiAgICAgICAgICAgICAgICBoZWFkZXJzOiB7CiAgICAgICAgICAgICAgICAgICAgdG9rZW4KICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfSkudGhlbihyZXM9PnsKICAgICAgICAgICAgICAgIGlmIChyZXMuc3RhdHVzPT09MjAwJiZyZXMuZGF0YS5jb2RlPT09U1VDQ0VTUyl7CiAgICAgICAgICAgICAgICAgICAgaWYgKHJlcy5kYXRhLmRhdGEpewogICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmNhdGVnb3J5PXJlcy5kYXRhLmRhdGEKICAgICAgICAgICAgICAgICAgICB9ZWxzZXsKICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy4kbWVzc2FnZS5lcnJvcihyZXMuZGF0YS5tc2cpOwogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKHJlcyk7CiAgICAgICAgICAgIH0pLmNhdGNoKCgpPT57CgogICAgICAgICAgICB9KQoKICAgICAgICB9CgogICAgfSwKICAgIG1vdW50ZWQoKSB7CiAgICAgICAgbGV0IHtjaWR9PXRoaXMuJHJvdXRlLnF1ZXJ5OwogICAgICAgIHRoaXMuaW5pdENhdGVnb3J5KGNpZCk7CiAgICB9Cn0K"},{"version":3,"sources":["categoryEdit.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;AAuBA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA","file":"categoryEdit.vue","sourceRoot":"src/views/main/category","sourcesContent":["<template>\n\n    <div>\n        <div v-if=\"category\">\n        <el-form :model=\"category\" :rules=\"categoryRules\" ref=\"categoryform\">\n            <el-form-item label=\"分类名称\" prop=\"cname\">\n                <el-input v-model=\"category.cname\" placeholder=\"请输入分类名称(2-6汉字)\"></el-input>\n            </el-form-item>\n            <el-form-item label=\"分类描述\" prop=\"cdesc\">\n                <el-input v-model=\"category.cdesc\" placeholder=\"请输入分类描述\"></el-input>\n\n            </el-form-item>\n            <el-form-item>\n                <el-button type=\"primary\" @click=\"handlerSubmit\">提交</el-button>\n            </el-form-item>\n        </el-form>\n        </div>\n    </div>\n    \n</template>\n\n<script>\n\n    import axios from 'axios';\n\n    import {URL,SUCCESS} from \"../../../lib/base\";\n\n    export default {\n        name: \"categoryEdit\",\n        data(){\n            let validateCname = (rule,value,callback)=>{\n                if (value===''){\n                    callback(new Error('分类名称不能为空'));\n                }else if (!(/[\\u4e00-\\u9fa5]{2,6}/.test(value))){\n                    callback(new Error('分类的名称只能包含2-6位汉字'))\n\n                }else{\n                    callback();\n                }\n\n            }\n\n            return{\n                category:null,\n                categoryRules:{\n                    cname:[\n                        // {required:true,massage:'分类名必填',trigger:'blur'},\n                        {validator:validateCname,trigger: \"blur\"}\n                    ],\n                    cdesc:[\n                        {required:true,massage:'请输入分类描述',trigger:'blur'},\n                        {min:3,max:20,massage: '长度为3-20位字符',trigger: 'blur'}\n\n\n                    ]\n\n                }\n            }\n        },\n        methods:{\n            handlerSubmit(){\n                this.$refs.categoryform.validate(valid=>{\n                    // console.log(valid);\n\n                    if (valid){\n                        let url=URL+'/admin/category/add';\n                        let token=sessionStorage.getItem('token');\n                        // axios.post(url,this.category).then(res=>{\n                        //     SUCCESS,FAIL\n                        //     console.log(res);\n                        // }).catch(error=>{\n                        //     this.$message.error('分类添加失败');\n                        // })\n                        axios({\n                            url,\n                            method:'POST',\n                            data:this.category,\n                            headers:{\n                                token\n                            }\n                        }).then(res=>{\n                            // console.log(res.data.code);\n                            if (res.status===200 && res.data.code===SUCCESS){\n                                this.$message.success(res.data.msg)\n                            }\n                        }).catch(()=>{\n                            this.message.error('分类添加失败')\n                        })\n                    }\n                })\n            },\n            initCategory(cid){\n                let url=URL+'/admin/category/read';\n                let token=sessionStorage.getItem('token');\n                axios({\n                    method:'GET',\n                    url,\n                    params:{cid},\n                    headers: {\n                        token\n                    }\n                }).then(res=>{\n                    if (res.status===200&&res.data.code===SUCCESS){\n                        if (res.data.data){\n                            this.category=res.data.data\n                        }else{\n                            this.$message.error(res.data.msg);\n                        }\n                    }\n                    console.log(res);\n                }).catch(()=>{\n\n                })\n\n            }\n\n        },\n        mounted() {\n            let {cid}=this.$route.query;\n            this.initCategory(cid);\n        }\n    }\n</script>\n\n<style scoped>\n\n</style>"]}]}