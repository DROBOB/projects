{"remainingRequest":"/Users/drob/Desktop/2006/suibian/drobob/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/drob/Desktop/2006/suibian/drobob/src/views/main/category/add.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/drob/Desktop/2006/suibian/drobob/src/views/main/category/add.vue","mtime":1601124363751},{"path":"/Users/drob/Desktop/2006/suibian/drobob/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/drob/Desktop/2006/suibian/drobob/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/drob/Desktop/2006/suibian/drobob/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/drob/Desktop/2006/suibian/drobob/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCgppbXBvcnQgYXhpb3MgZnJvbSAnYXhpb3MnOwoKaW1wb3J0IHtVUkwsU1VDQ0VTU30gZnJvbSAiLi4vLi4vLi4vbGliL2Jhc2UiOwoKZXhwb3J0IGRlZmF1bHQgewogICAgbmFtZTogImFkZCIsCiAgICBkYXRhKCl7CiAgICAgICAgbGV0IHZhbGlkYXRlQ25hbWUgPSAocnVsZSx2YWx1ZSxjYWxsYmFjayk9PnsKICAgICAgICAgICAgaWYgKHZhbHVlPT09JycpewogICAgICAgICAgICAgICAgY2FsbGJhY2sobmV3IEVycm9yKCfliIbnsbvlkI3np7DkuI3og73kuLrnqbonKSk7CiAgICAgICAgICAgIH1lbHNlIGlmICghKC9bXHU0ZTAwLVx1OWZhNV17Miw2fS8udGVzdCh2YWx1ZSkpKXsKICAgICAgICAgICAgICAgIGNhbGxiYWNrKG5ldyBFcnJvcign5YiG57G755qE5ZCN56ew5Y+q6IO95YyF5ZCrMi025L2N5rGJ5a2XJykpCgogICAgICAgICAgICB9ZWxzZXsKICAgICAgICAgICAgICAgIGNhbGxiYWNrKCk7CiAgICAgICAgICAgIH0KCiAgICAgICAgfQoKCgogICAgICAgIHJldHVybnsKICAgICAgICAgICAgY2F0ZWdvcnk6ewogICAgICAgICAgICAgICAgY25hbWU6JycsCiAgICAgICAgICAgICAgICBjZGVzYzonJwogICAgICAgICAgICB9LAogICAgICAgICAgICBjYXRlZ29yeVJ1bGVzOnsKICAgICAgICAgICAgICAgIGNuYW1lOlsKICAgICAgICAgICAgICAgICAgICAvLyB7cmVxdWlyZWQ6dHJ1ZSxtYXNzYWdlOifliIbnsbvlkI3lv4XloasnLHRyaWdnZXI6J2JsdXInfSwKICAgICAgICAgICAgICAgICAgICB7dmFsaWRhdG9yOnZhbGlkYXRlQ25hbWUsdHJpZ2dlcjogImJsdXIifQogICAgICAgICAgICAgICAgXSwKICAgICAgICAgICAgICAgIGNkZXNjOlsKICAgICAgICAgICAgICAgICAgICB7cmVxdWlyZWQ6dHJ1ZSxtYXNzYWdlOifor7fovpPlhaXliIbnsbvmj4/ov7AnLHRyaWdnZXI6J2JsdXInfSwKICAgICAgICAgICAgICAgICAgICB7bWluOjMsbWF4OjIwLG1hc3NhZ2U6ICfplb/luqbkuLozLTIw5L2N5a2X56ymJyx0cmlnZ2VyOiAnYmx1cid9CgoKICAgICAgICAgICAgICAgIF0KCiAgICAgICAgICAgIH0KICAgICAgICB9CiAgICB9LAogICAgbWV0aG9kczp7CiAgICAgICAgaGFuZGxlclN1Ym1pdCgpewogICAgICAgICAgICB0aGlzLiRyZWZzLmNhdGVnb3J5Zm9ybS52YWxpZGF0ZSh2YWxpZD0+ewogICAgICAgICAgICAgICAgLy8gY29uc29sZS5sb2codmFsaWQpOwoKICAgICAgICAgICAgICAgIGlmICh2YWxpZCl7CiAgICAgICAgICAgICAgICAgICAgbGV0IHVybD1VUkwrJy9hZG1pbi9jYXRlZ29yeS9hZGQnOwogICAgICAgICAgICAgICAgICAgIGxldCB0b2tlbj1zZXNzaW9uU3RvcmFnZS5nZXRJdGVtKCd0b2tlbicpOwogICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyh0b2tlbikKICAgICAgICAgICAgICAgICAgICAvLyBheGlvcy5wb3N0KHVybCx0aGlzLmNhdGVnb3J5KS50aGVuKHJlcz0+ewogICAgICAgICAgICAgICAgICAgIC8vICAgICBTVUNDRVNTLEZBSUwKICAgICAgICAgICAgICAgICAgICAvLyAgICAgY29uc29sZS5sb2cocmVzKTsKICAgICAgICAgICAgICAgICAgICAvLyB9KS5jYXRjaChlcnJvcj0+ewogICAgICAgICAgICAgICAgICAgIC8vICAgICB0aGlzLiRtZXNzYWdlLmVycm9yKCfliIbnsbvmt7vliqDlpLHotKUnKTsKICAgICAgICAgICAgICAgICAgICAvLyB9KQogICAgICAgICAgICAgICAgICAgIGF4aW9zKHsKICAgICAgICAgICAgICAgICAgICAgICAgdXJsLAogICAgICAgICAgICAgICAgICAgICAgICBtZXRob2Q6J1BPU1QnLAogICAgICAgICAgICAgICAgICAgICAgICBkYXRhOnRoaXMuY2F0ZWdvcnksCiAgICAgICAgICAgICAgICAgICAgICAgIGhlYWRlcnM6ewogICAgICAgICAgICAgICAgICAgICAgICAgICAgdG9rZW4KICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIH0pLnRoZW4ocmVzPT57CiAgICAgICAgICAgICAgICAgICAgICAgIC8vIGNvbnNvbGUubG9nKHJlcy5kYXRhLmNvZGUpOwogICAgICAgICAgICAgICAgICAgICAgICBpZiAocmVzLnN0YXR1cz09PTIwMCAmJiByZXMuZGF0YS5jb2RlPT09U1VDQ0VTUyl7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLiRtZXNzYWdlLnN1Y2Nlc3MocmVzLmRhdGEubXNnKQogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgfSkuY2F0Y2goKCk9PnsKICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5tZXNzYWdlLmVycm9yKCfliIbnsbvmt7vliqDlpLHotKUnKQogICAgICAgICAgICAgICAgICAgIH0pCiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0pCiAgICAgICAgfQoKICAgIH0KfQo="},{"version":3,"sources":["add.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;AAqBA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;;;;AAIA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA","file":"add.vue","sourceRoot":"src/views/main/category","sourcesContent":["<template>\n\n    <div>\n        <el-form :model=\"category\" :rules=\"categoryRules\" ref=\"categoryform\">\n            <el-form-item label=\"分类名称\" prop=\"cname\">\n                <el-input v-model=\"category.cname\" placeholder=\"请输入分类名称(2-6汉字)\"></el-input>\n            </el-form-item>\n            <el-form-item label=\"分类描述\" prop=\"cdesc\">\n                <el-input v-model=\"category.cdesc\" placeholder=\"请输入分类描述\"></el-input>\n\n            </el-form-item>\n            <el-form-item>\n                <el-button type=\"primary\" @click=\"handlerSubmit\">提交</el-button>\n            </el-form-item>\n        </el-form>\n    </div>\n    \n</template>\n\n<script>\n\n    import axios from 'axios';\n\n    import {URL,SUCCESS} from \"../../../lib/base\";\n\n    export default {\n        name: \"add\",\n        data(){\n            let validateCname = (rule,value,callback)=>{\n                if (value===''){\n                    callback(new Error('分类名称不能为空'));\n                }else if (!(/[\\u4e00-\\u9fa5]{2,6}/.test(value))){\n                    callback(new Error('分类的名称只能包含2-6位汉字'))\n\n                }else{\n                    callback();\n                }\n\n            }\n\n\n\n            return{\n                category:{\n                    cname:'',\n                    cdesc:''\n                },\n                categoryRules:{\n                    cname:[\n                        // {required:true,massage:'分类名必填',trigger:'blur'},\n                        {validator:validateCname,trigger: \"blur\"}\n                    ],\n                    cdesc:[\n                        {required:true,massage:'请输入分类描述',trigger:'blur'},\n                        {min:3,max:20,massage: '长度为3-20位字符',trigger: 'blur'}\n\n\n                    ]\n\n                }\n            }\n        },\n        methods:{\n            handlerSubmit(){\n                this.$refs.categoryform.validate(valid=>{\n                    // console.log(valid);\n\n                    if (valid){\n                        let url=URL+'/admin/category/add';\n                        let token=sessionStorage.getItem('token');\n                         console.log(token)\n                        // axios.post(url,this.category).then(res=>{\n                        //     SUCCESS,FAIL\n                        //     console.log(res);\n                        // }).catch(error=>{\n                        //     this.$message.error('分类添加失败');\n                        // })\n                        axios({\n                            url,\n                            method:'POST',\n                            data:this.category,\n                            headers:{\n                                token\n                            }\n                        }).then(res=>{\n                            // console.log(res.data.code);\n                            if (res.status===200 && res.data.code===SUCCESS){\n                                this.$message.success(res.data.msg)\n                            }\n                        }).catch(()=>{\n                            this.message.error('分类添加失败')\n                        })\n                    }\n                })\n            }\n\n        }\n    }\n</script>\n\n<style scoped>\n\n</style>"]}]}